/** * Universidade de Sao Paulo * Instituto de Ciencias Matematicas e de Computacao *  * SCC0205 Teoria da Computacao e Linguagens Formais * Trabalho 1 - Analisador Lexico para Linguagem AWK *  * Elias Italiano Rodrigues         7987251 * Gabriel Tessaroli Giancristofaro 4321350 * Paulo Augusto de Godoy Patire    7987060 */options{	JDK_VERSION = "1.5";	static = true; }PARSER_BEGIN(AWK)public class AWK {	public static void main(String args []) throws ParseException  {		AWK AwkParser = new AWK(System.in);		System.out.println("Reading awk program from standard input...");		AwkParser.Parse();		System.out.println("OK, AWK Program.");	}}PARSER_END(AWK)// Definicao dos caracteres que devem ser ignoradosSKIP:{	" " | "\r" | "\t" | "\n"}// Final de instrucaoTOKEN:{	<ENDLINE: ";">}// Palavras reservadasTOKEN:{	<BEGIN:       "BEGIN">|	<END:         "END">|	<ARGC:        "ARGC">|	<ARGIND:      "ARGIND">|	<ARGV:        "ARGV">|	<BINMODE:     "BINMODE">|	<CONVFMT:     "CONVFMT">|	<ENVIRON:     "ENVIRON">|	<ERRNO:       "ERRNO">|	<FIELDWIDTHS: "FIELDWIDTHS">|	<FILENAME:    "FILENAME">|	<FNR:         "FNR">|	<FS:          "FS">|	<IGNORECASE:  "IGNORECASE">|	<LINT:        "LINT">|	<NF:          "NF">|	<NR:          "NR">|	<OFMT:        "OFMT">|	<OFS:         "OFS">|	<ORS:         "ORS">|	<PROCINFO:    "PROCINFO">|	<RS:          "RS">|	<RT:          "RT">|	<RSTART:      "RSTART">|	<RLENGTH:     "RLENGTH">|	<SUBSEP:      "SUBSEP">|	<TEXTDOMAIN:  "TEXTDOMAIN">}// Comandos da linguagemTOKEN:{	<IF:       "if">|	<ELSE:     "else">|	<DO:       "do">|	<WHILE:    "while">|	<FOR:      "for">|	<IN:       "in">|	<DELETE:   "delete">|	<BREAK:    "break">|	<CONTINUE: "continue">|	<NEXT:     "next">|	<EXIT:     "exit">|	<RETURN:   "return">|	<PRINT:    "print">|	<GETLINE:  "getline">}// LiteraisTOKEN:{	<ID: ("_" | <LETTER>) ("_" | <LETTER> | <DIGIT>)* >|	<INTEGER: ("+" | "-")? (["0"-"9"])+>|	<FLOAT: ("+" | "-")? ((["0"-"9"])+)? "." (["0"-"9"])+>|	<ASSIGN: "="|"-="|"+="|"/="|"*="|"%="|"^=" >|	<COMPARISON: ">="|">"|"=="|"!="|"<="|"<" >|	<SINGLE_SIGN: ("+"|"-")>|	<ARITHMETIC: "-" | "+"  | "%"  |  "/" | "*" >|	<STRING: "\"" ((<CHAR>)+)? "\"">|		<#CHAR: (<ALPHA_NUMERIC>) | (<SYMBOL>)>|		<#ALPHA_NUMERIC: (<LETTER> | <DIGIT>)+>|		<#LETTER: ["a"-"z"] | ["A"-"Z"]>|		<#DIGIT: ["0"-"9"]>|		<#SYMBOL: " " | "!" | "\"" | "#" | "$" | "%" | "&" | "\'" | "(" | ")" | "*" | "+" | "," | "-" | "." | "/" | ":" | ";" | "<" | "=" | ">" | "?" | "@" | "[" | "\\" | "]" | "^" | "_" | "`" | "{" | "|" | "}" | "~">}// RegrasSimpleNode Parse() #PROGRAM : { }{	Program() { return jjtThis; }}void Program() : {}{	(Instruction())*}void Instruction() : {}{	Pattern() BeginCurly() Action() EndCurly() }void BeginCurly() #$BEGIN_CURLY : {Token t;} {	t="{" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void EndCurly() #$END_CURLY : {Token t;}{	t="}" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Pattern() #$PATTERN : {Token t;}{	(t=<BEGIN> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}| t=<END> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}| Expr())? }void Action() : {}{	(Statement())+}void Statement() : {}{	BeginCurly() (Expr() EndLine() | Command())+ EndCurly() 	| (Expr() EndLine() | Command())}void EndLine() #$ENDLINE : {Token t;}{	t=<ENDLINE> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Command() : {}{	If() | While() | Do_While() EndLine() | For() | Delete() EndLine() |	<BREAK> EndLine() | <CONTINUE> EndLine() | <NEXT> EndLine() | Exit() EndLine() |	Return() EndLine() | Print() EndLine() | GetLine() EndLine()}void BeginParenthesis() #$BEGIN_PARENTHESIS : {Token t;}{	t="(" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void EndParenthesis() #$END_PARENTHESIS : {Token t;}{	t=")" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void If() #$IF : {}{		LOOKAHEAD(IfLiteral() BeginParenthesis() Expr() EndParenthesis() Statement() ElseLiteral() Statement())	IfLiteral() BeginParenthesis() Expr() EndParenthesis() Statement() ElseLiteral() Statement() | 	IfLiteral() BeginParenthesis() Expr() EndParenthesis() Statement()}void IfLiteral() #$IF : {Token t;}{	t=<IF> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void ElseLiteral() #$ELSE : {Token t;}{	t=<ELSE> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void While() #$WHILE : {}{	WhileLiteral() BeginParenthesis() Expr() EndParenthesis() Statement()}void WhileLiteral() #$WHILE : {Token t;}{	t=<WHILE> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Do_While() #$DO_WHILE : {}{	DoLiteral() Statement() WhileLiteral() BeginParenthesis() Expr() EndParenthesis() EndLine()}void DoLiteral() #$DO : {Token t;}{	t=<DO> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void For() #$FOR : {}{	LOOKAHEAD(ForLiteral() BeginParenthesis() (Expr())? ForSeparator() (Expr())? ForSeparator() (Expr())? EndParenthesis() Statement())	ForLiteral() BeginParenthesis() (Expr())? ForSeparator() (Expr())? ForSeparator() 		(Expr())? EndParenthesis() Statement() |	ForLiteral() BeginParenthesis() Variable() InLiteral() IdLiteral() EndParenthesis()		Statement()}void ForLiteral() #$FOR : {Token t;}{	t=<FOR> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void ForSeparator() #$FOR_SEPARATOR : {Token t;}{	t=<ENDLINE> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void InLiteral() #$IN : {Token t;}{	t=<IN> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void IdLiteral() #$ID : {Token t;}{	t=<ID> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Delete() : {}{	DeleteLiteral() IdLiteral() BeginBracket() Index() EndBracket()}void DeleteLiteral() #$DELETE : {Token t;}{	t=<DELETE> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void BeginBracket() #$BEGIN_BRACKET : {Token t;}{	t="[" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void EndBracket() #$END_BRACKET : {Token t;}{	t="]" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Exit() #$EXIT : {Token t;}{	t=<EXIT> (Expr())? {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Return() #$RETURN : {Token t;}{	t=<RETURN> (Expr())? {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Print() #$PRINT : {Token t;}{	t=<PRINT> (Expr_List())? {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void GetLine() #$GETLINE : {Token t;}{	t=<GETLINE> (Variable())? {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr_List() : {}{	(LOOKAHEAD(Expr()) Expr() | Command() | Variable()) (Comma() (LOOKAHEAD(Expr()) Expr() | Command() | Variable()))*}void Comma() #$COMMA : {Token t;}{	t="," {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Variable() #$VARIABLE : {Token t;}{	(t=<ID> | t="$" Expr() | t=<ARGC> | t=<ARGIND> | t=<ARGV> | t=<BINMODE> | t=<CONVFMT> | t=<ENVIRON> | t=<ERRNO>	| t=<FIELDWIDTHS> | t=<FILENAME> | t=<FNR> | t=<FS> | t=<IGNORECASE> | t=<LINT>| t=<NF>| t=<NR>| t=<OFMT>	| t=<OFS> | t=<ORS> | t=<PROCINFO> | t=<RS> | t=<RT> | t=<RSTART> | t=<RLENGTH> | t=<SUBSEP> | t=<TEXTDOMAIN>)	{jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Index() #$INDEX : {Token t;}{	(t=<INTEGER> | t=<STRING>)+ {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr() : {}{//	LValue() <ASSIGN> Expr01() | Expr01()//	LValue() (<ASSIGN> Expr01() | Expr01())	LOOKAHEAD(LValue() AssignLiteral() Expr01())	LValue() AssignLiteral() Expr01() | Expr01()}void AssignLiteral() #$ASSIGN : {Token t;}{	t=<ASSIGN> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr01() : {}{	LOOKAHEAD(Expr02() QuestionMark() Expr01() Colon() Expr01())	Expr02() QuestionMark() Expr01() Colon() Expr01() | Expr02()}void QuestionMark() #$QUESTION_MARK : {Token t;}{	t="?" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Colon() #$COLON : {Token t;}{	t=":" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr02() : {}{	LOOKAHEAD(Expr03() AndOr()  Expr02())	Expr03() AndOr()  Expr02() | Expr03()}void AndOr() #$AND_OR : {Token t;}{	(t="||"|t="&&") {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr03() : {}{	LOOKAHEAD(BeginParenthesis() Index() EndParenthesis() InLiteral() IdLiteral())	BeginParenthesis() Index() EndParenthesis() InLiteral() IdLiteral() | Expr04()}void Expr04() : {}{	LOOKAHEAD(Expr05() InLiteral() IdLiteral())	Expr05() InLiteral() IdLiteral() | Expr05()}void Expr05() :{}{	LOOKAHEAD(Expr06() ComparisonLiteral() Expr05())	Expr06() ComparisonLiteral() Expr05() | Expr06()}void ComparisonLiteral() #$COMPARISON : {Token t;}{	t=<COMPARISON> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr06() : {}{	LOOKAHEAD(Expr07() Expr06())	Expr07() Expr06() | Expr07()}void Expr07() : {}{	LOOKAHEAD(Expr08() ArithmeticLiteral() Expr07())	Expr08() ArithmeticLiteral() Expr07() | Expr08()}void ArithmeticLiteral() #$ARITHMETIC : {Token t;}{	t=<ARITHMETIC> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr08() : {}{	SingleSignLiteral() Expr09() | Expr09()}void SingleSignLiteral() #$SINGLE_SIGN : {Token t;}{	t=<SINGLE_SIGN> {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr09() : {}{	LOOKAHEAD(Expr10() ExpoLiteral() Expr09())	Expr10() ExpoLiteral() Expr09() | Expr10()}void ExpoLiteral() #$EXPO : {Token t;}{	t="^" {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr10() : {}{	LOOKAHEAD(LValue() UnaryOpLiteral() | UnaryOpLiteral() LValue())	LValue() UnaryOpLiteral() | UnaryOpLiteral() LValue() | Expr11()}void UnaryOpLiteral() #$UNARY_OP : {Token t;}{	(t="--" | t="++") {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}void Expr11() : {}{	BeginParenthesis() Expr() EndParenthesis() | Expr12()}void Expr12() : {}{	Variable() | Constant()}void LValue() : {}{	LOOKAHEAD(Variable() BeginBracket() Index() EndBracket())	Variable() BeginBracket() Index() EndBracket() | Variable()}void Constant() #$CONSTANT : {Token t;}{	(t=<INTEGER> | t=<FLOAT> | t=<STRING>) {jjtThis.value = t.image; jjtThis.line = t.beginLine; jjtThis.column = t.beginColumn;}}